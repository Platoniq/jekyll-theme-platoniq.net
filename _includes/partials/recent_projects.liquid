{% assign locale = page.locale %}

<div class="container-lg d-flex flex-column">
    {% if page.slug == projects %}
        {% assign limit = related_projects | size  %}
    {% else %}
        {% assign limit =  2 %}
    {%endif%}
    {{ paginator.projects[locale] | jsonify }} 

    {% for project in related_projects %}
        {% assign state = site.states | where: "slug", project.state | where: "locale", page.locale | first %}
        <div class="d-flex align-items-lg-center justify-content-end pb-lg-5 project_preview">
            <div class="img-fluid project-preview-img">
                <img src="{{ site.data[locale].global.project_img_decorator.path }}" 
                    alt="{{ site.data[locale].global.project_img_decorator.alt }}" 
                    class="img-fluid project_img_line_preview">
                <img src="{{ project.banner_image.path }}" 
                    alt="{{ project.banner_image.url }}" 
                    class="img-fluid img-project-previe-inside w-100">
            </div>
            <div class="d-flex flex-column col-lg-7 p-lg-5 p-2 flex-fill">
                <div class="d-flex flex-row justify-content-lg-start justify-content-end">
                    <div class="pe-2">
                        <i class="fa-solid fa-square {{state.color}}"></i>
                    </div>
                    <div class="{{state.color}}">
                        <p>{{ state.title }}</p>
                    </div>
                </div>
                <h4>
                    <a href="{{ project | relative_url }}">{{ project.title }}</a>
                </h4>
                <p>{{ project.description }}</p>
            </div>
        </div>
    {% endfor %}

</div>