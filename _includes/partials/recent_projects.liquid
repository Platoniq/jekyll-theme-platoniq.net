{% if page.slug == "home" %}
    {% assign related_projects = site.projects | where: "locale", page.locale | reverse %}
{% else %}
    {% assign related_projects = site.projects | where: "categories", page.slug | where: "locale", page.locale | reverse %}   <!--coge aquellos proyectos (en el idioma actual) cuyo array categories contenga el slug de esta category --> 
{% endif %}

<div class="container-lg d-flex flex-column pb-lg-5  pb-3">
    <h1>{{ site.data[locale].global.recent_projects }}</h1>
</div>
<div class="container-lg d-flex flex-column">
    {% for project in related_projects limit:2 %}
        {% assign state = site.states | where: "slug", project.state | where: "locale", page.locale | first %}
        {% assign value = forloop.index | modulo:2 %}
        <div class="d-flex align-items-lg-center justify-content-end pb-lg-5 project_preview">
            <div class="img-fluid project-preview-img">
                <img src={{ site.data[locale].global.project_img_decorator.path }} 
                     alt={{ site.data[locale].global.project_img_decorator.alt }} 
                     class="img-fluid project_img_line_preview">
                <img src={{ project.banner_image.path }} 
                     alt="{{ project.banner_image.url }}" 
                     class="img-fluid img-project-previe-inside w-100">
            </div>
            <div class="d-flex flex-column col-lg-7 p-lg-5 p-2 flex-fill">
                <div class="d-flex flex-row justify-content-lg-start justify-content-end">
                    <div class="pe-2">
                        <i class="fa-solid fa-square {{state.color}}"></i>
                    </div>
                    <div class="{{state.color}}">
                        <p> {{ state.title }} </p>
                    </div>
                </div>
                <h4>
                    <a href={{ project | relative_url }}>{{ project.title }}</a>
                </h4>
                <p>{{ project.description }}</p>
            </div>
        </div>
    {% endfor %}
</div>